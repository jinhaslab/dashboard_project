<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 8 Shiny for questionnaire input | Dashbord for Public Health with R</title>
<meta name="author" content="jinha yoon">
<meta name="generator" content="bookdown 0.33 with bs4_book()">
<meta property="og:title" content="Chapter 8 Shiny for questionnaire input | Dashbord for Public Health with R">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 8 Shiny for questionnaire input | Dashbord for Public Health with R">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.27/datatables.js"></script><link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><script src="libs/jszip-1.12.1/jszip.min.js"></script><link href="libs/dt-ext-buttons-1.12.1/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-buttons-1.12.1/js/dataTables.buttons.min.js"></script><script src="libs/dt-ext-buttons-1.12.1/js/buttons.html5.min.js"></script><script src="libs/dt-ext-buttons-1.12.1/js/buttons.colVis.min.js"></script><script src="libs/dt-ext-buttons-1.12.1/js/buttons.print.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
<meta name="description" content="In this chapter, I will discuss about the PHQ-9 and shiny apps.  PHQ-9 The Patient Health Questionnaire-9 (PHQ-9) is a self-report questionnaire used to screen for major depressive disorder (MDD)....">
<meta property="og:description" content="In this chapter, I will discuss about the PHQ-9 and shiny apps.  PHQ-9 The Patient Health Questionnaire-9 (PHQ-9) is a self-report questionnaire used to screen for major depressive disorder (MDD)....">
<meta name="twitter:description" content="In this chapter, I will discuss about the PHQ-9 and shiny apps.  PHQ-9 The Patient Health Questionnaire-9 (PHQ-9) is a self-report questionnaire used to screen for major depressive disorder (MDD)....">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Dashbord for Public Health with R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">I Basic Setting for Dashboard</li>
<li><a class="" href="rstudio-setting-cloud.html"><span class="header-section-number">2</span> Rstudio setting (Cloud)</a></li>
<li><a class="" href="rstudio-chatgpt-addin.html"><span class="header-section-number">3</span> Rstudio ChatGPT addin</a></li>
<li><a class="" href="flexdashboard.html"><span class="header-section-number">4</span> Flexdashboard</a></li>
<li><a class="" href="flexdashboard-with-datatable.html"><span class="header-section-number">5</span> Flexdashboard with DataTable</a></li>
<li class="book-part">Review of Data visualization</li>
<li><a class="" href="reivew-of-r-visualization-for-statistical-results.html"><span class="header-section-number">6</span> Reivew of R visualization for statistical results</a></li>
<li class="book-part">Interractive dashboard</li>
<li><a class="" href="shiny.html"><span class="header-section-number">7</span> Shiny</a></li>
<li><a class="active" href="shiny-for-questionnaire-input.html"><span class="header-section-number">8</span> Shiny for questionnaire input</a></li>
<li><a class="" href="parts.html"><span class="header-section-number">9</span> Parts</a></li>
<li><a class="" href="footnotes-and-citations.html"><span class="header-section-number">10</span> Footnotes and citations</a></li>
<li><a class="" href="blocks.html"><span class="header-section-number">11</span> Blocks</a></li>
<li><a class="" href="sharing-your-book.html"><span class="header-section-number">12</span> Sharing your book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="shiny-for-questionnaire-input" class="section level1" number="8">
<h1>
<span class="header-section-number">8</span> Shiny for questionnaire input<a class="anchor" aria-label="anchor" href="#shiny-for-questionnaire-input"><i class="fas fa-link"></i></a>
</h1>
<p>In this chapter, I will discuss about the PHQ-9 and shiny apps. <br></p>
<blockquote>
<p>PHQ-9</p>
</blockquote>
<p>The Patient Health Questionnaire-9 (PHQ-9) is a self-report questionnaire used to screen for major depressive disorder (MDD). It is a nine-item questionnaire that asks about symptoms of depression such as depressed mood, loss of interest or pleasure, changes in sleep, changes in appetite, changes in energy, difficulty concentrating, worthlessness or excessive guilt, thoughts of death or suicide, and psychomotor agitation or retardation. The PHQ-9 is scored on a scale of 0 to 27, with higher scores indicating more severe depression. A score of 10 or more is considered to be positive for MDD.</p>
<p>for questionnaire, the url is following.</p>
<p><a href="https://med.stanford.edu/fastlab/research/imapp/msrs/_jcr_content/main/accordion/accordion_content3/download_256324296/file.res/PHQ9%20id%20date%2008.03.pdf" class="uri">https://med.stanford.edu/fastlab/research/imapp/msrs/_jcr_content/main/accordion/accordion_content3/download_256324296/file.res/PHQ9%20id%20date%2008.03.pdf</a>
<br></p>
<p><iframe src="https://med.stanford.edu/fastlab/research/imapp/msrs/_jcr_content/main/accordion/accordion_content3/download_256324296/file.res/PHQ9%20id%20date%2008.03.pdf" width="100%" height="800px" style="border: none;"></iframe></p>
<p><br></p>
<blockquote>
<p>Here are the guidelines for each score on the PHQ-9:</p>
</blockquote>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="12%">
<col width="20%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th>Score</th>
<th>severity</th>
<th>Guideline</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0-4</td>
<td>Minimal depression</td>
<td>You may have some mild symptoms of depression, but they are not severe enough to interfere with your daily life.</td>
</tr>
<tr class="even">
<td>5-9</td>
<td>Mild depression</td>
<td>You may have some moderate symptoms of depression, and they may be interfering with your daily life to some extent.</td>
</tr>
<tr class="odd">
<td>10-14</td>
<td>Moderate depression</td>
<td>You may have some severe symptoms of depression, and they are interfering with your daily life to a significant extent.</td>
</tr>
<tr class="even">
<td>15-19</td>
<td>Moderately severe depression</td>
<td>You may have some very severe symptoms of depression, and they are interfering with your daily life to a great extent.</td>
</tr>
<tr class="odd">
<td>20-27</td>
<td>Severe depression</td>
<td>You may have some extremely severe symptoms of depression, and they are interfering with your daily life to a very great extent.</td>
</tr>
</tbody>
</table></div>
<p><br></p>
<blockquote>
<p>Now, let’s creates a fluid page with a single tab panel containing a questionnaire based on the Patient Health Questionnaire-9 (PHQ-9)</p>
</blockquote>
<p><br></p>
<div class="inline-figure"><img src="img/shinyq1.png" width="100%"></div>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui</span> <span class="op">=</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="st">"Questionnaire"</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">12</span>, <span class="st">"PHQ-9"</span>, </span>
<span>                     <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>                     <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">5</span>, <span class="st">"Questionnaire"</span><span class="op">)</span>, </span>
<span>                     <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">7</span>, <span class="st">"Scores"</span><span class="op">)</span></span>
<span>                     <span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">12</span>, <span class="st">""</span>,</span>
<span>               <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>                       <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">5</span>, <span class="st">"Little interest or pleasure in doing things"</span><span class="op">)</span>, </span>
<span>                       <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/radioButtons.html">radioButtons</a></span><span class="op">(</span><span class="st">"phq1"</span>, <span class="st">""</span>,</span>
<span>                                              choiceNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Not at all'</span>,</span>
<span>                                                              <span class="st">'Several'</span>,</span>
<span>                                                              <span class="st">'More than half'</span>,</span>
<span>                                                              <span class="st">'Nearly every'</span></span>
<span>                                              <span class="op">)</span>, </span>
<span>                                              choiceValues <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                                              inline <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>                     <span class="op">)</span></span>
<span>              <span class="op">)</span><span class="op">)</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html">actionButton</a></span><span class="op">(</span><span class="st">"submit_depression"</span>, <span class="st">"Submit!"</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">htmlOutput</a></span><span class="op">(</span><span class="st">"depression"</span><span class="op">)</span></span>
<span>             <span class="op">)</span> </span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="img/shinyradiobutton1.gif" width="100%"></div>
<ul>
<li>The radioButtons() function has the following arguments:
<ul>
<li>phq1: The name of the radio button group.</li>
<li>label: The label for the radio button group.</li>
<li>choiceNames: A vector of strings that contains the names of the options in the radio button group.</li>
<li>choiceValues: A vector of numbers that corresponds to the values of the options in the radio button group.</li>
<li>inline: A logical value that indicates whether the radio buttons should be displayed inline (TRUE) or in a separate row (FALSE).</li>
</ul>
</li>
</ul>
<p>When this code is executed, it will create a radio button group with the following options:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>choiceNames</th>
<th>choiceValues</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Not at all</td>
<td>(0)</td>
</tr>
<tr class="even">
<td>Several</td>
<td>(1)</td>
</tr>
<tr class="odd">
<td>More than half</td>
<td>(2)</td>
</tr>
<tr class="even">
<td>Nearly every</td>
<td>(3)</td>
</tr>
</tbody>
</table></div>
<p>The user can select one of these options by clicking on the corresponding radio button. <br></p>
<p><strong>The value of the selected option will be stored in the variable phq1.</strong></p>
<p>The depression_score() reactive function is defined as follows:</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">depression_score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">phq1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">phq1</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">phq1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>This function first converts the value of the phq1 input to a number. It then sums the values of the phq1 input. The result is returned from the function.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">server</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">submit_depression</span>, <span class="op">{</span></span>
<span>    <span class="va">depression_score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">phq1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">phq1</span><span class="op">)</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">phq1</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">depression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/renderPrint.html">renderText</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Your Score is"</span>, <span class="fu">depression_score</span><span class="op">(</span><span class="op">)</span>, <span class="st">"point"</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The renderText() function is used to render text to the output. In the code you provided, the renderText() function is used to render the text “Your Score is” followed by the value of the depression_score() reactive function. <br></p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui</span> <span class="op">=</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="co"># previous UI code here </span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">htmlOutput</a></span><span class="op">(</span><span class="st">"depression"</span><span class="op">)</span></span>
<span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>finally for UI again, the htmlOutput() function is used to create an output that will display the value of the depression reactive function. The value of the depression reactive function is the depression score calculated based on the value of the phq1 input</p>
<blockquote>
<p>Let’s make global.R</p>
</blockquote>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"tidyverse"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">pkg</span> <span class="kw">in</span> <span class="va">pkgs</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va">pkg</span>, character.only <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">pkg</span>, character.only <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">q_depression</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"1) Little interest or pleasure in doing things?"</span>,</span>
<span>                    <span class="st">"2) Feeling down, depressed, or hopeless?"</span>,  </span>
<span>                    <span class="st">"3) Trouble falling or staying asleep, or sleeping too much?"</span>,</span>
<span>                    <span class="st">"4) Feeling tired or having little energy?"</span>,</span>
<span>                    <span class="st">"5) Poor appetite or overeating?"</span>, </span>
<span>                    <span class="st">"6) Feeling bad about yourself or that you are a failure or</span></span>
<span><span class="st">have let yourself or your family down?"</span>,</span>
<span>                    <span class="st">"7) Trouble concentrating on things, such as reading the</span></span>
<span><span class="st">newspaper or watching television?"</span>,</span>
<span>                    <span class="st">"8) Moving or speaking so slowly that other people could</span></span>
<span><span class="st">have noticed. Or the opposite being so figety or</span></span>
<span><span class="st">restless that you have been moving around a lot more</span></span>
<span><span class="st">than usual?"</span>,</span>
<span>                    <span class="st">"9) Thoughts that you would be better off dead, or of</span></span>
<span><span class="st">hurting yourself"</span><span class="op">)</span></span>
<span><span class="va">bt_depression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Not at all'</span>,</span>
<span>                   <span class="st">'Several days'</span>,</span>
<span>                   <span class="st">'More than \nhalf the days'</span>, </span>
<span>                   <span class="st">'Nearly every day'</span><span class="op">)</span></span>
<span><span class="va">sc_depression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<blockquote>
<p>Now, I will use global, q_depression, bt_depression and sc_depression, to shorten the code of ui in Shiny.</p>
</blockquote>
<div class="inline-figure"><img src="img/shinyq3.png" width="100%"></div>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui</span> <span class="op">=</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="st">"Questionnaire"</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">12</span>, <span class="st">"PHQ-9"</span>, </span>
<span>                     <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>                     <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">5</span>, <span class="st">"Questionnaire"</span><span class="op">)</span>, </span>
<span>                     <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">7</span>, <span class="st">"Scores"</span><span class="op">)</span></span>
<span>                     <span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">12</span>, <span class="st">""</span>,</span>
<span>               <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>                 </span>
<span>                 </span>
<span>                       <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">5</span>, <span class="va">q_depression</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, </span>
<span>                       <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/radioButtons.html">radioButtons</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"phq%s"</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">""</span>,</span>
<span>                                              choiceNames  <span class="op">=</span> <span class="va">bt_depression</span>, </span>
<span>                                              choiceValues <span class="op">=</span> <span class="va">sc_depression</span>,</span>
<span>                                              inline <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>                     <span class="op">)</span></span>
<span>              <span class="op">)</span><span class="op">)</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html">actionButton</a></span><span class="op">(</span><span class="st">"submit_depression"</span>, <span class="st">"Submit!"</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">htmlOutput</a></span><span class="op">(</span><span class="st">"depression"</span><span class="op">)</span></span>
<span>             <span class="op">)</span> </span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>make other questionnaires</p>
</blockquote>
<div class="inline-figure"><img src="img/shinyq5.png" width="100%"></div>
<p>Using lapply() is a good approach to generate repetitive code blocks with slightly different input parameters. It allows you to avoid duplicating code and reduces the chances of introducing errors.</p>
<p>By using lapply(), you can loop over a sequence of integers (in this case, 1 to 9) and create a list of elements that share the same structure, but with different inputs. This makes it much easier to generate a questionnaire with many questions and options, as you only need to specify the question and answer choices once, and then the code takes care of generating the rest.</p>
<p>Additionally, using functions like lapply() can also make your code more modular and easier to maintain, as you can separate the logic for generating the input elements from the overall structure of the Shiny app. This can be especially useful when you need to make changes or add new features to your app.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui</span> <span class="op">=</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="st">"Questionnaire"</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>               <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">12</span>, <span class="st">"PHQ-9"</span>, </span>
<span>                      <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>                        <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">5</span>, <span class="st">"Questionnaire"</span><span class="op">)</span>, </span>
<span>                        <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">7</span>, <span class="st">"Scores"</span><span class="op">)</span></span>
<span>                      <span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">12</span>, <span class="st">""</span>,</span>
<span>                      <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidRow</a></span><span class="op">(</span></span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">{</span></span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>                            <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">5</span>, <span class="va">q_depression</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, </span>
<span>                            <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/column.html">column</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/radioButtons.html">radioButtons</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"phq%s"</span>, <span class="va">i</span><span class="op">)</span>, <span class="st">""</span>,</span>
<span>                                                   choiceNames  <span class="op">=</span> <span class="va">bt_depression</span>, </span>
<span>                                                   choiceValues <span class="op">=</span> <span class="va">sc_depression</span>,</span>
<span>                                                   inline <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>                        <span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span>               <span class="op">)</span><span class="op">)</span>, </span>
<span>             <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html">actionButton</a></span><span class="op">(</span><span class="st">"submit_depression"</span>, <span class="st">"Submit!"</span><span class="op">)</span>,</span>
<span>         </span>
<span>            <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">htmlOutput</a></span><span class="op">(</span><span class="st">"depression"</span>,  style <span class="op">=</span> <span class="st">"font-size: 20px"</span><span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">htmlOutput</a></span><span class="op">(</span><span class="st">"guide_depression"</span>,  style <span class="op">=</span> <span class="st">"font-size: 20px"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> </span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">server</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">submit_depression</span>, <span class="op">{</span></span>
<span>    <span class="va">depression_score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="va">sum</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="va">ph</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"phq"</span>, <span class="va">i</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">input</span><span class="op">[[</span><span class="va">ph</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">depression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/renderPrint.html">renderText</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Your Score is"</span>, <span class="fu">depression_score</span><span class="op">(</span><span class="op">)</span>, <span class="st">"point"</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">guide_depression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/renderPrint.html">renderText</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu">guide_depression</span><span class="op">(</span><span class="fu">depression_score</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>      </span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"tidyverse"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">pkg</span> <span class="kw">in</span> <span class="va">pkgs</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va">pkg</span>, character.only <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">pkg</span>, character.only <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">q_depression</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"1) Little interest or pleasure in doing things?"</span>,</span>
<span>                    <span class="st">"2) Feeling down, depressed, or hopeless?"</span>,  </span>
<span>                    <span class="st">"3) Trouble falling or staying asleep, or sleeping too much?"</span>,</span>
<span>                    <span class="st">"4) Feeling tired or having little energy?"</span>,</span>
<span>                    <span class="st">"5) Poor appetite or overeating?"</span>, </span>
<span>                    <span class="st">"6) Feeling bad about yourself or that you are a failure or have let yourself or your family down?"</span>,</span>
<span>                    <span class="st">"7) Trouble concentrating on things, such as reading the newspaper or watching television?"</span>,</span>
<span>                    <span class="st">"8) Moving or speaking so slowly that other people could have noticed. Or the opposite being so figety or restless that you have been moving around a lot more than usual"</span>,</span>
<span>                    <span class="st">"9) Thoughts that you would be better off dead, or of hurting yourself"</span><span class="op">)</span></span>
<span><span class="va">bt_depression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Not at all'</span>,</span>
<span>                   <span class="st">'Several days'</span>,</span>
<span>                   <span class="st">'More than half the days'</span>, </span>
<span>                   <span class="st">'Nearly every day'</span><span class="op">)</span></span>
<span><span class="va">sc_depression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="va">interpre_depression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="st">"step"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>, </span>
<span>                                  <span class="st">"severity"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Minimal depression"</span>, </span>
<span>                                                 <span class="st">"Mild depression"</span>, </span>
<span>                                                 <span class="st">"Moderate depression"</span>, </span>
<span>                                                 <span class="st">"Moderately severe depression"</span>, </span>
<span>                                                 <span class="st">"Severe depression"</span></span>
<span>                                                 <span class="op">)</span>, </span>
<span>                                  <span class="st">"guideline"</span><span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"they are not severe enough to interfere with your daily life"</span>, <span class="st">"You may have some moderate symptoms of depression, and they may be interfering with your daily life to some extent."</span>, <span class="st">"You may have some severe symptoms of depression, and they are interfering with your daily life to a significant extent."</span>, <span class="st">"You may have some very severe symptoms of depression, and they are interfering with your daily life to a great extent."</span>, <span class="st">"You may have some extremely severe symptoms of depression, and they are interfering with your daily life to a very great extent."</span><span class="op">)</span></span>
<span>                                  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>guideline2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%s!: %s"</span>, <span class="va">severity</span>, <span class="va">guideline</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">guide_depression</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">&lt;</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">interpre_depression</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">step</span> <span class="op">==</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">guideline2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">&lt;</span><span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">interpre_depression</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">step</span> <span class="op">==</span><span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">guideline2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">&lt;</span><span class="fl">15</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">interpre_depression</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">step</span> <span class="op">==</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">guideline2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">&lt;</span><span class="fl">20</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">interpre_depression</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">step</span> <span class="op">==</span><span class="fl">4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">guideline2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">interpre_depression</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">step</span> <span class="op">==</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">guideline2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>

</div>
  <div class="chapter-nav">
<div class="prev"><a href="shiny.html"><span class="header-section-number">7</span> Shiny</a></div>
<div class="next"><a href="parts.html"><span class="header-section-number">9</span> Parts</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav"><li><a class="nav-link" href="#shiny-for-questionnaire-input"><span class="header-section-number">8</span> Shiny for questionnaire input</a></li></ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/0451-shiny.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/0451-shiny.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Dashbord for Public Health with R</strong>" was written by jinha yoon. It was last built on 2023-04-26.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
