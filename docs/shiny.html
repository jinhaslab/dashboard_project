<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 6 Shiny | Dashbord for Public Health with R</title>

    <meta name="author" content="jinha yoon" />
  
   
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Chapter 6 Shiny | Dashbord for Public Health with R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Shiny | Dashbord for Public Health with R" />
  
  
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.4.2/transition.js"></script>
    <script src="libs/bs3compat-0.4.2/tabs.js"></script>
    <script src="libs/bs3compat-0.4.2/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.10.0/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
    <style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
      <link rel="stylesheet" href="style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Dashbord for Public Health with R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="shiny" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Shiny</h1>
<div id="kwcs-data-preparation" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> KWCS data preparation</h2>
<p>Prior to start about shiny, I will review the tabf code.
That code will download the kwcsData6th.rds file from the GitHub repository and save it as data/kwcs6th.rds on your local machine. Then, it will use the readRDS function to load the data into R as an object named dat1.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="shiny.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb24-2"><a href="shiny.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;tidyverse&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb24-3"><a href="shiny.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;htmlTable&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;htmlTable&quot;</span>)</span>
<span id="cb24-4"><a href="shiny.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;broom&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;broom&quot;</span>)</span>
<span id="cb24-5"><a href="shiny.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;devtools&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb24-6"><a href="shiny.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb24-7"><a href="shiny.html#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;tabf&quot;</span>)) <span class="fu">install_github</span>(<span class="st">&quot;jinhaslab/tabf&quot;</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-8"><a href="shiny.html#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tabf)</span>
<span id="cb24-9"><a href="shiny.html#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># data download</span></span>
<span id="cb24-10"><a href="shiny.html#cb24-10" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span><span class="st">&quot;https://github.com/jinhaslab/opendata/raw/3006e12f54bd2abd3cd1aac9cda807ef8e614a42/kwcs/kwcsData6th.rds&quot;</span></span>
<span id="cb24-11"><a href="shiny.html#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, <span class="st">&quot;data/kwcs6th.rds&quot;</span>)</span>
<span id="cb24-12"><a href="shiny.html#cb24-12" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/kwcs6th.rds&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="shiny.html#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="shiny.html#cb25-2" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> dat1 <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="shiny.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;sleepgp&quot;</span>, <span class="st">&quot;wwa1gp&quot;</span>, <span class="st">&quot;shortReturn&quot;</span>,<span class="st">&quot;shiftWork&quot;</span> , <span class="st">&quot;njob&quot;</span>, <span class="st">&quot;sexgp&quot;</span>,  <span class="st">&quot;edugp&quot;</span>, <span class="st">&quot;empgp&quot;</span>, <span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;satisfaction&quot;</span>)</span>
<span id="cb25-4"><a href="shiny.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb25-5"><a href="shiny.html#cb25-5" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">remove_labels</span>(dat1) </span></code></pre></div>
<p>This code uses the %&gt;% operator from the dplyr package to filter the columns of the dat1 data frame. The select function is used to specify the columns to keep in the filtered data frame.</p>
<p>The selected columns are:</p>
<ul>
<li>variables
<ul>
<li>“sleepgp”: Sleep status group</li>
<li>“wwa1gp”: Weekly working hours group</li>
<li>“shortReturn”: Whether the respondent has a short return time from work or not</li>
<li>“shiftWork”: Whether the respondent works shifts or not</li>
<li>“njob”: Number of jobs</li>
<li>“sexgp”: Sex group</li>
<li>“edugp”: Education level group</li>
<li>“empgp”: Employment group</li>
<li>“AGE”: Age</li>
<li>“satisfaction”: Work satisfaction</li>
</ul></li>
</ul>
<p>After the data frame has been filtered, only the specified columns will remain in the data frame, and all other columns will be dropped. This can be useful for simplifying your data set and focusing your analysis on specific variables.</p>
</div>
<div id="remind-table-1-for-kwcs" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> remind Table 1 for KWCS</h2>
<p>Code is specifying that the variables should be stratified by the single variable “sleepgp”, and that the categorical variables are “wwa1gp”, “shortReturn”, “shiftWork”, “njob”, “sexgp”, “edugp”, and “empgp”, while the continuous variables are “AGE” and “satisfaction”. The function “tabf” is likely a custom function that generates the Table 1 summary based on these inputs. Finally, the “htmlTable” function is being used to output the results in an HTML table format, which can be easily viewed in a web browser or other software that can render HTML tables.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="shiny.html#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="shiny.html#cb26-2" aria-hidden="true" tabindex="-1"></a>stratas  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;sleepgp&quot;</span>)</span>
<span id="cb26-3"><a href="shiny.html#cb26-3" aria-hidden="true" tabindex="-1"></a>catVars <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;wwa1gp&quot;</span>, <span class="st">&quot;shortReturn&quot;</span>,<span class="st">&quot;shiftWork&quot;</span> , <span class="st">&quot;njob&quot;</span>, <span class="st">&quot;sexgp&quot;</span>,  <span class="st">&quot;edugp&quot;</span>, <span class="st">&quot;empgp&quot;</span>)</span>
<span id="cb26-4"><a href="shiny.html#cb26-4" aria-hidden="true" tabindex="-1"></a>conVars <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;satisfaction&quot;</span>)</span>
<span id="cb26-5"><a href="shiny.html#cb26-5" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">=</span> <span class="fu">tabf</span>(<span class="at">dat1=</span>dat1, <span class="at">stratas =</span> stratas, <span class="at">catVars =</span> catVars, <span class="at">conVars =</span> conVars)</span>
<span id="cb26-6"><a href="shiny.html#cb26-6" aria-hidden="true" tabindex="-1"></a>tab1 <span class="sc">%&gt;%</span> <span class="fu">htmlTable</span>(<span class="at">align =</span><span class="st">&quot;l&quot;</span>) </span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-bottom: 1px solid grey; border-top: 2px solid grey;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
variables
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
values
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
0.non distrubance
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
1.sleep disturbance
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
p.value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">
1
</td>
<td style="text-align: left;">
AGE
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
46.8±12.4
</td>
<td style="text-align: left;">
49.7±11.9
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
2
</td>
<td style="text-align: left;">
wwa1gp
</td>
<td style="text-align: left;">
Never
</td>
<td style="text-align: left;">
12222 (94.7%)
</td>
<td style="text-align: left;">
684 (5.3%)
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
3
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Rarely
</td>
<td style="text-align: left;">
12316 (94.5%)
</td>
<td style="text-align: left;">
714 (5.5%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
4
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Sometimes
</td>
<td style="text-align: left;">
9112 (90.3%)
</td>
<td style="text-align: left;">
981 (9.7%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
5
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Often
</td>
<td style="text-align: left;">
3456 (82.8%)
</td>
<td style="text-align: left;">
717 (17.2%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
6
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Always
</td>
<td style="text-align: left;">
634 (70.0%)
</td>
<td style="text-align: left;">
272 (30.0%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
7
</td>
<td style="text-align: left;">
satisfaction
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
2.1±0.5
</td>
<td style="text-align: left;">
2.4±0.6
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
8
</td>
<td style="text-align: left;">
shortReturn
</td>
<td style="text-align: left;">
non short return
</td>
<td style="text-align: left;">
36183 (92.5%)
</td>
<td style="text-align: left;">
2927 (7.5%)
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
9
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
short return
</td>
<td style="text-align: left;">
1557 (77.9%)
</td>
<td style="text-align: left;">
441 (22.1%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
10
</td>
<td style="text-align: left;">
shiftWork
</td>
<td style="text-align: left;">
non shift work
</td>
<td style="text-align: left;">
35056 (91.9%)
</td>
<td style="text-align: left;">
3073 (8.1%)
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
11
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
shift work
</td>
<td style="text-align: left;">
2684 (90.1%)
</td>
<td style="text-align: left;">
295 (9.9%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
12
</td>
<td style="text-align: left;">
njob
</td>
<td style="text-align: left;">
one-job
</td>
<td style="text-align: left;">
37471 (91.9%)
</td>
<td style="text-align: left;">
3317 (8.1%)
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
13
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
njob
</td>
<td style="text-align: left;">
269 (84.1%)
</td>
<td style="text-align: left;">
51 (15.9%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
14
</td>
<td style="text-align: left;">
sexgp
</td>
<td style="text-align: left;">
Men
</td>
<td style="text-align: left;">
17892 (93.1%)
</td>
<td style="text-align: left;">
1327 (6.9%)
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
15
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Women
</td>
<td style="text-align: left;">
19848 (90.7%)
</td>
<td style="text-align: left;">
2041 (9.3%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
16
</td>
<td style="text-align: left;">
edugp
</td>
<td style="text-align: left;">
university or more
</td>
<td style="text-align: left;">
19597 (92.9%)
</td>
<td style="text-align: left;">
1502 (7.1%)
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
17
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
high school
</td>
<td style="text-align: left;">
14943 (91.9%)
</td>
<td style="text-align: left;">
1318 (8.1%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
18
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
middle school or below
</td>
<td style="text-align: left;">
3200 (85.4%)
</td>
<td style="text-align: left;">
548 (14.6%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
19
</td>
<td style="text-align: left;">
empgp
</td>
<td style="text-align: left;">
paid-worker
</td>
<td style="text-align: left;">
25786 (92.4%)
</td>
<td style="text-align: left;">
2122 (7.6%)
</td>
<td style="text-align: left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align: left;">
20
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
employer/self-employer
</td>
<td style="text-align: left;">
2539 (91.7%)
</td>
<td style="text-align: left;">
229 (8.3%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="text-align: left;">
21
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
own-account worker
</td>
<td style="text-align: left;">
8359 (90.5%)
</td>
<td style="text-align: left;">
880 (9.5%)
</td>
<td style="text-align: left;">
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
22
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
unpaind family work
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
1056 (88.5%)
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
137 (11.5%)
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
</td>
</tr>
</tbody>
</table>
</div>
<div id="introduction-shiny" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Introduction shiny</h2>
<p>R Shiny is a web application framework for R programming language that provides an interactive and simple way for data analysis and visualization. The official documentation for Shiny can be found at <a href="https://shiny.rstudio.com/" class="uri">https://shiny.rstudio.com/</a> and provides comprehensive information on using Shiny for web application development. <br>
At this moment, I just introduced Shiny using KWCS data.</p>
<p>Let install shiny</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="shiny.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;shiny&quot;</span>)) <span class="fu">install.packages</span>(shiny)</span>
<span id="cb27-2"><a href="shiny.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span></code></pre></div>
<div id="basic-structure-of-shiny" class="section level3" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> basic structure of shiny</h3>
<p>This code defines the UI and server components of a Shiny app and then runs the app using the shinyApp() function.</p>
<p>In the ui component, you define the user interface of the app using R code. This typically includes elements like input controls (e.g. sliders, text boxes, dropdown menus) and output displays (e.g. plots, tables, text).</p>
<p>In the server component, you define the server-side logic of the app. This code processes user inputs, performs calculations, and generates output for the UI to display. In the server function, you typically define reactive expressions and use Shiny’s reactive programming features to create dynamic behavior in the app.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="shiny.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb28-2"><a href="shiny.html#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="shiny.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI</span></span>
<span id="cb28-4"><a href="shiny.html#cb28-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb28-5"><a href="shiny.html#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># User interface components go here</span></span>
<span id="cb28-6"><a href="shiny.html#cb28-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-7"><a href="shiny.html#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="shiny.html#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server</span></span>
<span id="cb28-9"><a href="shiny.html#cb28-9" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb28-10"><a href="shiny.html#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Server-side logic and output generation go here</span></span>
<span id="cb28-11"><a href="shiny.html#cb28-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-12"><a href="shiny.html#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="shiny.html#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the app</span></span>
<span id="cb28-14"><a href="shiny.html#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<blockquote>
<p>seperate file of shiny</p>
</blockquote>
<p>you can separate the UI, server, and global code into separate files in a Shiny app. This can make your code easier to organize and maintain, especially for larger apps.</p>
<p>Here’s an example of how you can structure your code into separate files:</p>
<ol style="list-style-type: decimal">
<li>ui.R: This file contains the code for the user interface of the app.</li>
</ol>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="shiny.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb29-2"><a href="shiny.html#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="shiny.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI</span></span>
<span id="cb29-4"><a href="shiny.html#cb29-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb29-5"><a href="shiny.html#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># User interface components go here</span></span>
<span id="cb29-6"><a href="shiny.html#cb29-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>server.R: This file contains the server-side logic and output generation of the app.</li>
</ol>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="shiny.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb30-2"><a href="shiny.html#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="shiny.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server</span></span>
<span id="cb30-4"><a href="shiny.html#cb30-4" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb30-5"><a href="shiny.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Server-side logic and output generation go here</span></span>
<span id="cb30-6"><a href="shiny.html#cb30-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>global.R: This file contains any global code that needs to be shared across the app, such as data loading or library imports.</li>
</ol>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="shiny.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Global code goes here</span></span>
<span id="cb31-2"><a href="shiny.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb31-3"><a href="shiny.html#cb31-3" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/kwcs6th.rds&quot;</span>)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>run the app</li>
</ol>
<p><img src="img/shinybasic1.png" width="100%"></p>
</div>
</div>
<div id="communication-between-ui-server" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> communication between ui, server</h2>
<p>The user interface section of a Shiny app receives user input variables and sends them to the server section for processing. The server section accepts the input variables from the user interface, applies the necessary processing and rendering steps, generates output variables, and sends them back to the user interface. Finally, the user interface receives the output variables from the server section and displays them to the user</p>
<p><img src="img/shinyinputoutput1.png" width="100%"></p>
<p>User input: The user interacts with input widgets defined in the user interface section of the app. These input widgets can take a variety of forms, such as text boxes, sliders, and buttons.</p>
<p>Input variables: When the user interacts with an input widget, an input variable is generated. This variable contains the data entered by the user, such as the text typed into a text box or the value selected from a dropdown menu.</p>
<p>Sending inputs to the server: The user interface section sends the input variables to the server section of the app. This happens automatically and in real-time, using reactive programming techniques.</p>
<p>Processing input variables: The server section receives the input variables from the user interface and processes them as needed. This might involve performing calculations, filtering data, or running complex algorithms.</p>
<p>Rendering output: Once the input variables have been processed, the server section generates output variables. These variables contain the data that will be displayed to the user, such as a plot, a table, or a text string. The server section also applies any necessary formatting or styling to the output variables.</p>
<p>Sending outputs to the user interface: The server section sends the output variables back to the user interface section of the app. Again, this happens automatically and in real-time, using reactive programming techniques.</p>
<p>Displaying outputs to the user: The user interface section receives the output variables from the server section and displays them to the user. This might involve rendering the output as a plot, table, or text string, depending on the specific output format of the app. The output elements in the user interface are reactive, meaning they update in real-time as the input variables are changed by the user.</p>
</div>
<div id="shiny-ui-structures" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> shiny UI structures</h2>
<p><img src="img/shinystructure1.png" width="100%"></p>
<p>Now, we discuss an overview of the structure of the user interface (UI) section in Shiny, specifically focusing on the use of sidebarPanel, mainPanel, tabsetPanel, inputWidgets, and actionButton.</p>
<p>sidebarLayout(): Creates a two-panel layout with a sidebar on the left and a main panel on the right.</p>
<p>sidebarPanel(): Defines the content for the sidebar panel, which typically contains input widgets, such as sliders, dropdown menus, or text input boxes.</p>
<p>mainPanel(): Defines the content for the main panel, which typically contains output elements, such as tables, plots, or text output.</p>
<p>tabsetPanel(): Organizes the UI into multiple tabs, with different content displayed in each tab.</p>
<p>actionButton(): Creates a button widget that the user can click to trigger an action in the app.</p>
</div>
<div id="input-and-ouput" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Input and ouput</h2>
<p>The first code chunk defines the user interface (UI) for a Shiny app. The UI consists of a text input box labeled “What is your outcome?” with a default value of “Sleep problem”, and a verbatim text output labeled “myoutput”.</p>
<p>The second code chunk defines the server-side logic for the Shiny app. Specifically, it creates a reactive expression that renders the text entered in the input box as the output.</p>
<p>The third code chunk loads a data file named “kwcs6th.rds” as a data frame called “dat1” using the readRDS() function from the tidyverse package.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="shiny.html#cb32-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb32-2"><a href="shiny.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create input text box</span></span>
<span id="cb32-3"><a href="shiny.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textInput</span>(<span class="st">&quot;myquestion&quot;</span>, <span class="st">&quot;What is your outcome:&quot;</span>, <span class="at">value =</span> <span class="st">&quot;Sleep problem&quot;</span>),</span>
<span id="cb32-4"><a href="shiny.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-5"><a href="shiny.html#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create output</span></span>
<span id="cb32-6"><a href="shiny.html#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">verbatimTextOutput</span>(<span class="st">&quot;myoutput&quot;</span>)</span>
<span id="cb32-7"><a href="shiny.html#cb32-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="shiny.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server</span></span>
<span id="cb33-2"><a href="shiny.html#cb33-2" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb33-3"><a href="shiny.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define reactive expression for output</span></span>
<span id="cb33-4"><a href="shiny.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>myoutput <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="cb33-5"><a href="shiny.html#cb33-5" aria-hidden="true" tabindex="-1"></a>    input<span class="sc">$</span>myquestion</span>
<span id="cb33-6"><a href="shiny.html#cb33-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb33-7"><a href="shiny.html#cb33-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="shiny.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb34-2"><a href="shiny.html#cb34-2" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/kwcs6th.rds&quot;</span>)</span>
<span id="cb34-3"><a href="shiny.html#cb34-3" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> dat1 <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="shiny.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;sleepgp&quot;</span>, <span class="st">&quot;wwa1gp&quot;</span>, <span class="st">&quot;shortReturn&quot;</span>,<span class="st">&quot;shiftWork&quot;</span> , <span class="st">&quot;njob&quot;</span>, <span class="st">&quot;sexgp&quot;</span>,  <span class="st">&quot;edugp&quot;</span>, <span class="st">&quot;empgp&quot;</span>, <span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;satisfaction&quot;</span>)</span>
<span id="cb34-5"><a href="shiny.html#cb34-5" aria-hidden="true" tabindex="-1"></a>gg <span class="ot">=</span> <span class="fu">names</span>(dat1)</span></code></pre></div>
<blockquote>
<p>Input and server feedback</p>
</blockquote>
<p>This code creates a dropdown menu for selecting the strata variable, and a table output object named “tableoutput1”.</p>
<p>The server function subsets the data to the selected strata variable using the input$strata variable and creates a table of the frequency of each category in the selected variable. The addmargins() function is used to add a row and column to the table with the totals.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="shiny.html#cb35-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb35-2"><a href="shiny.html#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="shiny.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create output</span></span>
<span id="cb35-4"><a href="shiny.html#cb35-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">selectInput</span>(<span class="st">&quot;smry&quot;</span>, <span class="st">&quot;Select variables of summary:&quot;</span>, <span class="at">choices =</span> gg, <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">&quot;sleepgp&quot;</span>)), </span>
<span id="cb35-5"><a href="shiny.html#cb35-5" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb35-6"><a href="shiny.html#cb35-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">tableOutput</span>(<span class="st">&quot;tableoutput1&quot;</span>)</span>
<span id="cb35-7"><a href="shiny.html#cb35-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="shiny.html#cb36-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb36-2"><a href="shiny.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define reactive expression for output</span></span>
<span id="cb36-3"><a href="shiny.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>myoutput <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="cb36-4"><a href="shiny.html#cb36-4" aria-hidden="true" tabindex="-1"></a>    input<span class="sc">$</span>myquestion</span>
<span id="cb36-5"><a href="shiny.html#cb36-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb36-6"><a href="shiny.html#cb36-6" aria-hidden="true" tabindex="-1"></a>  selected_smry <span class="ot">&lt;-</span> <span class="fu">reactive</span>({input<span class="sc">$</span>smry})</span>
<span id="cb36-7"><a href="shiny.html#cb36-7" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>tableoutput1 <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb36-8"><a href="shiny.html#cb36-8" aria-hidden="true" tabindex="-1"></a>    dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(<span class="fu">selected_smry</span>())) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb36-9"><a href="shiny.html#cb36-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">addmargins</span>() </span>
<span id="cb36-10"><a href="shiny.html#cb36-10" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb36-11"><a href="shiny.html#cb36-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="shiny.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb37-2"><a href="shiny.html#cb37-2" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/kwcs6th.rds&quot;</span>)</span>
<span id="cb37-3"><a href="shiny.html#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="shiny.html#cb37-4" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> dat1 <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="shiny.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;sleepgp&quot;</span>, <span class="st">&quot;wwa1gp&quot;</span>, <span class="st">&quot;shortReturn&quot;</span>,<span class="st">&quot;shiftWork&quot;</span> , <span class="st">&quot;njob&quot;</span>, <span class="st">&quot;sexgp&quot;</span>,  <span class="st">&quot;edugp&quot;</span>, <span class="st">&quot;empgp&quot;</span>, <span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;satisfaction&quot;</span>)</span>
<span id="cb37-6"><a href="shiny.html#cb37-6" aria-hidden="true" tabindex="-1"></a>gg <span class="ot">=</span> <span class="fu">names</span>(dat1)</span></code></pre></div>
<p>if the selected variable is numeric, the table() function may not be the most suitable way to summarize the data. Instead, you can use the summarize() function from the tidyverse package to calculate the mean and standard deviation of the selected variable.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="shiny.html#cb38-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb38-2"><a href="shiny.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define reactive expression for output</span></span>
<span id="cb38-3"><a href="shiny.html#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="shiny.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  selected_smry <span class="ot">&lt;-</span> <span class="fu">reactive</span>({input<span class="sc">$</span>smry})</span>
<span id="cb38-5"><a href="shiny.html#cb38-5" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>tableoutput1 <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb38-6"><a href="shiny.html#cb38-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb38-7"><a href="shiny.html#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.numeric</span>(dat1 <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="fu">selected_smry</span>()))){</span>
<span id="cb38-8"><a href="shiny.html#cb38-8" aria-hidden="true" tabindex="-1"></a>      dat1 <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mean=</span><span class="fu">mean</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">selected_smry</span>())), </span>
<span id="cb38-9"><a href="shiny.html#cb38-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">sd=</span><span class="fu">sd</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">selected_smry</span>())))</span>
<span id="cb38-10"><a href="shiny.html#cb38-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb38-11"><a href="shiny.html#cb38-11" aria-hidden="true" tabindex="-1"></a>      dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(<span class="fu">selected_smry</span>())) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-12"><a href="shiny.html#cb38-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">addmargins</span>() </span>
<span id="cb38-13"><a href="shiny.html#cb38-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb38-14"><a href="shiny.html#cb38-14" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb38-15"><a href="shiny.html#cb38-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="img/shiny1gif.gif" width="100%"></p>
<p>This code shows a basic example of a Shiny app, and you can build on this foundation to create more complex apps with additional features.
For example, you could add more input widgets to allow the user to select different subsets of data or change the analysis parameters, or you could add more output elements to display different types of visualizations or summary statistics.</p>
<div id="outputs-from-input" class="section level3" number="6.6.1">
<h3><span class="header-section-number">6.6.1</span> outputs from input</h3>
<p>It’s important to use the correct typeOutput function in the user interface section for the type of output being displayed in the app, depending on which type of render function is used to generate the output in the server section.</p>
<p>For example, renderPlot() generates a plot output and should be paired with plotOutput() in the UI section, while renderTable() generates a table output and should be paired with tableOutput(). It’s also worth noting that renderText() can only handle character strings, while renderPrint() can handle any printed output.</p>
<p>Data tables are a special type of table output that allow users to page through the data or sort it, and are displayed using dataTableOutput().
important examples are shown below</p>
<p>→</p>
<table>
<thead>
<tr class="header">
<th>Server rendering</th>
<th>assignment</th>
<th>UI Output function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>renderText()</code></td>
<td><code>output$prediction</code></td>
<td><code>textOutput("prediction")</code></td>
</tr>
<tr class="even">
<td><code>renderPrint()</code></td>
<td><code>output$model</code></td>
<td><code>textOutput("model")</code></td>
</tr>
<tr class="odd">
<td><code>renderPlot()</code></td>
<td><code>output$plot1</code></td>
<td><code>plotOutput("plot1")</code></td>
</tr>
<tr class="even">
<td><code>renderTable()</code></td>
<td><code>output$table1</code></td>
<td><code>tableOutput("table1")</code></td>
</tr>
<tr class="odd">
<td><code>renderDataTable()</code></td>
<td><code>output$dt</code></td>
<td><code>dataTableOutput("dt")</code></td>
</tr>
</tbody>
</table>
</div>
<div id="tab-pannels" class="section level3" number="6.6.2">
<h3><span class="header-section-number">6.6.2</span> Tab pannels</h3>
<blockquote>
<p>Tab pannel</p>
</blockquote>
<p>The code defines the user interface (UI) for a Shiny app that contains a tabsetPanel with two tabPanels named “Summary Table” and “Table 1”. The UI includes two tabs, but neither tab has any content or input widgets</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="shiny.html#cb39-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb39-2"><a href="shiny.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(</span>
<span id="cb39-3"><a href="shiny.html#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Summary Table&quot;</span>),</span>
<span id="cb39-4"><a href="shiny.html#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Table 1&quot;</span>)</span>
<span id="cb39-5"><a href="shiny.html#cb39-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-6"><a href="shiny.html#cb39-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Now, the “Summary Table” tabPanel includes a selectInput widget called “smry” and a tableOutput widget called “tableoutput1”, which are defined as outputs for the server function.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="shiny.html#cb40-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb40-2"><a href="shiny.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-3"><a href="shiny.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(</span>
<span id="cb40-4"><a href="shiny.html#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Summary Table&quot;</span>,</span>
<span id="cb40-5"><a href="shiny.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-6"><a href="shiny.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create output</span></span>
<span id="cb40-7"><a href="shiny.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;smry&quot;</span>, <span class="st">&quot;Select variables of summary:&quot;</span>, <span class="at">choices =</span> gg, <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">&quot;sleepgp&quot;</span>)), </span>
<span id="cb40-8"><a href="shiny.html#cb40-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-9"><a href="shiny.html#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tableOutput</span>(<span class="st">&quot;tableoutput1&quot;</span>)</span>
<span id="cb40-10"><a href="shiny.html#cb40-10" aria-hidden="true" tabindex="-1"></a>  )), </span>
<span id="cb40-11"><a href="shiny.html#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabPanel</span>(<span class="st">&quot;Table 1&quot;</span>)</span>
<span id="cb40-12"><a href="shiny.html#cb40-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-13"><a href="shiny.html#cb40-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-14"><a href="shiny.html#cb40-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<blockquote>
<p>Multiple input and Table 1</p>
</blockquote>
<p>Remind following code of Table 1. We will use following code in shiny</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="shiny.html#cb41-1" aria-hidden="true" tabindex="-1"></a>stratas  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;sleepgp&quot;</span>)</span>
<span id="cb41-2"><a href="shiny.html#cb41-2" aria-hidden="true" tabindex="-1"></a>catVars <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;wwa1gp&quot;</span>, <span class="st">&quot;shortReturn&quot;</span>,<span class="st">&quot;shiftWork&quot;</span> , <span class="st">&quot;njob&quot;</span>, <span class="st">&quot;sexgp&quot;</span>,  <span class="st">&quot;edugp&quot;</span>, <span class="st">&quot;empgp&quot;</span>)</span>
<span id="cb41-3"><a href="shiny.html#cb41-3" aria-hidden="true" tabindex="-1"></a>conVars <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;satisfaction&quot;</span>)</span>
<span id="cb41-4"><a href="shiny.html#cb41-4" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">=</span> <span class="fu">tabf</span>(<span class="at">dat1=</span>dat1, <span class="at">stratas =</span> stratas, <span class="at">catVars =</span> catVars, <span class="at">conVars =</span> conVars)</span>
<span id="cb41-5"><a href="shiny.html#cb41-5" aria-hidden="true" tabindex="-1"></a>tab1 <span class="sc">%&gt;%</span> <span class="fu">htmlTable</span>(<span class="at">align =</span><span class="st">&quot;l&quot;</span>) </span></code></pre></div>
<p>for ui, this app has two tabs: one for the Summary Table and one for the Table 1 summary. In the Summary Table tab, the user can select one or more variables from a dropdown menu called “smry”, and the app generates a summary table that shows summary statistics for the selected variables. F
In the Table 1 tab, the user can select a strata variable from a dropdown menu called “stratas”, one or more categorical variables from a dropdown menu called “catVars”, and one or more continuous variables from a dropdown menu called “conVars”. The app then generates a Table 1 summary for the selected variables stratified by the selected strata variable.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="shiny.html#cb42-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb42-2"><a href="shiny.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-3"><a href="shiny.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(</span>
<span id="cb42-4"><a href="shiny.html#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Summary Table&quot;</span>,</span>
<span id="cb42-5"><a href="shiny.html#cb42-5" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb42-6"><a href="shiny.html#cb42-6" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create output</span></span>
<span id="cb42-7"><a href="shiny.html#cb42-7" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;smry&quot;</span>, <span class="st">&quot;Select variables of summary:&quot;</span>, </span>
<span id="cb42-8"><a href="shiny.html#cb42-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> gg, <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">&quot;sleepgp&quot;</span>)), </span>
<span id="cb42-9"><a href="shiny.html#cb42-9" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb42-10"><a href="shiny.html#cb42-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">tableOutput</span>(<span class="st">&quot;tableoutput1&quot;</span>)</span>
<span id="cb42-11"><a href="shiny.html#cb42-11" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb42-12"><a href="shiny.html#cb42-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Table 1&quot;</span>, </span>
<span id="cb42-13"><a href="shiny.html#cb42-13" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb42-14"><a href="shiny.html#cb42-14" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for strata variables</span></span>
<span id="cb42-15"><a href="shiny.html#cb42-15" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;stratas&quot;</span>, <span class="st">&quot;Select strata variable(s):&quot;</span>, </span>
<span id="cb42-16"><a href="shiny.html#cb42-16" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="fu">names</span>(dat1)), </span>
<span id="cb42-17"><a href="shiny.html#cb42-17" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;sleepgp&quot;</span>, <span class="at">multiple =</span> <span class="cn">FALSE</span>),</span>
<span id="cb42-18"><a href="shiny.html#cb42-18" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb42-19"><a href="shiny.html#cb42-19" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for categorical variables</span></span>
<span id="cb42-20"><a href="shiny.html#cb42-20" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;catVars&quot;</span>, <span class="st">&quot;Select categorical variable(s):&quot;</span>, </span>
<span id="cb42-21"><a href="shiny.html#cb42-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>), </span>
<span id="cb42-22"><a href="shiny.html#cb42-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;wwa1gp&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>),</span>
<span id="cb42-23"><a href="shiny.html#cb42-23" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb42-24"><a href="shiny.html#cb42-24" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for continuous variables</span></span>
<span id="cb42-25"><a href="shiny.html#cb42-25" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;conVars&quot;</span>, <span class="st">&quot;Select continuous variable(s):&quot;</span>, </span>
<span id="cb42-26"><a href="shiny.html#cb42-26" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="fu">names</span>(dat1)[<span class="fu">sapply</span>(dat1, is.numeric)]), </span>
<span id="cb42-27"><a href="shiny.html#cb42-27" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>),</span>
<span id="cb42-28"><a href="shiny.html#cb42-28" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb42-29"><a href="shiny.html#cb42-29" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Output table for Table 1</span></span>
<span id="cb42-30"><a href="shiny.html#cb42-30" aria-hidden="true" tabindex="-1"></a>             <span class="fu">uiOutput</span>(<span class="st">&quot;table1&quot;</span>)</span>
<span id="cb42-31"><a href="shiny.html#cb42-31" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb42-32"><a href="shiny.html#cb42-32" aria-hidden="true" tabindex="-1"></a>    )))</span></code></pre></div>
<p>The server component of the app includes reactive expressions that update the dropdown menus dynamically based on the user’s selections, as well as the “tabf” function that generates the Table 1 summary based on the selected variables and strata variable. The resulting Table 1 summary is output in an HTML table format using the “htmlTable” function from the “htmlTable” package.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="shiny.html#cb43-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb43-2"><a href="shiny.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define reactive expression for output</span></span>
<span id="cb43-3"><a href="shiny.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-4"><a href="shiny.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  selected_smry <span class="ot">&lt;-</span> <span class="fu">reactive</span>({input<span class="sc">$</span>smry})</span>
<span id="cb43-5"><a href="shiny.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>tableoutput1 <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb43-6"><a href="shiny.html#cb43-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-7"><a href="shiny.html#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.numeric</span>(dat1 <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="fu">selected_smry</span>()))){</span>
<span id="cb43-8"><a href="shiny.html#cb43-8" aria-hidden="true" tabindex="-1"></a>      dat1 <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mean=</span><span class="fu">mean</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">selected_smry</span>())), </span>
<span id="cb43-9"><a href="shiny.html#cb43-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">sd=</span><span class="fu">sd</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">selected_smry</span>())))</span>
<span id="cb43-10"><a href="shiny.html#cb43-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb43-11"><a href="shiny.html#cb43-11" aria-hidden="true" tabindex="-1"></a>      dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(<span class="fu">selected_smry</span>())) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb43-12"><a href="shiny.html#cb43-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addmargins</span>() </span>
<span id="cb43-13"><a href="shiny.html#cb43-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb43-14"><a href="shiny.html#cb43-14" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb43-15"><a href="shiny.html#cb43-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-16"><a href="shiny.html#cb43-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-17"><a href="shiny.html#cb43-17" aria-hidden="true" tabindex="-1"></a>  catVars <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>catVars)</span>
<span id="cb43-18"><a href="shiny.html#cb43-18" aria-hidden="true" tabindex="-1"></a>  conVars <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>conVars)</span>
<span id="cb43-19"><a href="shiny.html#cb43-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-20"><a href="shiny.html#cb43-20" aria-hidden="true" tabindex="-1"></a>  selectedstrata <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>stratas)</span>
<span id="cb43-21"><a href="shiny.html#cb43-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb43-22"><a href="shiny.html#cb43-22" aria-hidden="true" tabindex="-1"></a>    char <span class="ot">=</span> <span class="fu">names</span>(dat1)[(<span class="fu">sapply</span>(dat1, is.character))]</span>
<span id="cb43-23"><a href="shiny.html#cb43-23" aria-hidden="true" tabindex="-1"></a>    choices <span class="ot">&lt;-</span> char[char<span class="sc">!=</span><span class="fu">selectedstrata</span>()]</span>
<span id="cb43-24"><a href="shiny.html#cb43-24" aria-hidden="true" tabindex="-1"></a>     <span class="fu">updatePickerInput</span>(session, <span class="st">&quot;catVars&quot;</span>, <span class="at">choices =</span> choices, <span class="at">selected =</span> <span class="st">&quot;None&quot;</span>)</span>
<span id="cb43-25"><a href="shiny.html#cb43-25" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb43-26"><a href="shiny.html#cb43-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-27"><a href="shiny.html#cb43-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-28"><a href="shiny.html#cb43-28" aria-hidden="true" tabindex="-1"></a>  tab1 <span class="ot">=</span> <span class="fu">reactive</span>(<span class="fu">tabf</span>(<span class="at">dat1=</span>dat1, <span class="at">stratas =</span> <span class="fu">selectedstrata</span>(), <span class="at">catVars =</span> <span class="fu">catVars</span>(), <span class="at">conVars =</span> <span class="fu">conVars</span>()))</span>
<span id="cb43-29"><a href="shiny.html#cb43-29" aria-hidden="true" tabindex="-1"></a>   output<span class="sc">$</span>table1 <span class="ot">=</span> <span class="fu">renderUI</span>(<span class="fu">tab1</span>() <span class="sc">%&gt;%</span> <span class="fu">htmlTable</span>(<span class="at">align =</span><span class="st">&quot;l&quot;</span>))</span>
<span id="cb43-30"><a href="shiny.html#cb43-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-31"><a href="shiny.html#cb43-31" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<blockquote>
<p>SidebarLayout</p>
</blockquote>
<p>In the Summary Table tab, the sidebarLayout function is used to create a layout with a sidebar panel and a main panel. The selectInput function for the “smry” variable is placed in the sidebar panel, and the tableOutput function is placed in the main panel. This allows the user to select the variables to summarize in the sidebar, while the resulting table is displayed in the main panel.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="shiny.html#cb44-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb44-2"><a href="shiny.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-3"><a href="shiny.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(</span>
<span id="cb44-4"><a href="shiny.html#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Summary Table&quot;</span>,</span>
<span id="cb44-5"><a href="shiny.html#cb44-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">sidebarLayout</span>(     </span>
<span id="cb44-6"><a href="shiny.html#cb44-6" aria-hidden="true" tabindex="-1"></a>               <span class="fu">sidebarPanel</span>(</span>
<span id="cb44-7"><a href="shiny.html#cb44-7" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb44-8"><a href="shiny.html#cb44-8" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create output</span></span>
<span id="cb44-9"><a href="shiny.html#cb44-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;smry&quot;</span>, <span class="st">&quot;Select variables of summary:&quot;</span>, <span class="at">choices =</span> gg, <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">&quot;sleepgp&quot;</span>))</span>
<span id="cb44-10"><a href="shiny.html#cb44-10" aria-hidden="true" tabindex="-1"></a>             ), </span>
<span id="cb44-11"><a href="shiny.html#cb44-11" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb44-12"><a href="shiny.html#cb44-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mainPanel</span>(</span>
<span id="cb44-13"><a href="shiny.html#cb44-13" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tableOutput</span>(<span class="st">&quot;tableoutput1&quot;</span>)</span>
<span id="cb44-14"><a href="shiny.html#cb44-14" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb44-15"><a href="shiny.html#cb44-15" aria-hidden="true" tabindex="-1"></a>    )), </span>
<span id="cb44-16"><a href="shiny.html#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Table 1&quot;</span>, </span>
<span id="cb44-17"><a href="shiny.html#cb44-17" aria-hidden="true" tabindex="-1"></a>             <span class="fu">sidebarLayout</span>(</span>
<span id="cb44-18"><a href="shiny.html#cb44-18" aria-hidden="true" tabindex="-1"></a>               <span class="fu">sidebarPanel</span>(</span>
<span id="cb44-19"><a href="shiny.html#cb44-19" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for strata variables</span></span>
<span id="cb44-20"><a href="shiny.html#cb44-20" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;stratas&quot;</span>, <span class="st">&quot;Select strata variable(s):&quot;</span>, </span>
<span id="cb44-21"><a href="shiny.html#cb44-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="fu">names</span>(dat1)), </span>
<span id="cb44-22"><a href="shiny.html#cb44-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;sleepgp&quot;</span>, <span class="at">multiple =</span> <span class="cn">FALSE</span>),</span>
<span id="cb44-23"><a href="shiny.html#cb44-23" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb44-24"><a href="shiny.html#cb44-24" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for categorical variables</span></span>
<span id="cb44-25"><a href="shiny.html#cb44-25" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;catVars&quot;</span>, <span class="st">&quot;Select categorical variable(s):&quot;</span>, </span>
<span id="cb44-26"><a href="shiny.html#cb44-26" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>), </span>
<span id="cb44-27"><a href="shiny.html#cb44-27" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;wwa1gp&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-28"><a href="shiny.html#cb44-28" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb44-29"><a href="shiny.html#cb44-29" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for continuous variables</span></span>
<span id="cb44-30"><a href="shiny.html#cb44-30" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;conVars&quot;</span>, <span class="st">&quot;Select continuous variable(s):&quot;</span>, </span>
<span id="cb44-31"><a href="shiny.html#cb44-31" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="fu">names</span>(dat1)[<span class="fu">sapply</span>(dat1, is.numeric)]), </span>
<span id="cb44-32"><a href="shiny.html#cb44-32" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-33"><a href="shiny.html#cb44-33" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb44-34"><a href="shiny.html#cb44-34" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb44-35"><a href="shiny.html#cb44-35" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Output table for Table 1</span></span>
<span id="cb44-36"><a href="shiny.html#cb44-36" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mainPanel</span>(</span>
<span id="cb44-37"><a href="shiny.html#cb44-37" aria-hidden="true" tabindex="-1"></a>               <span class="fu">uiOutput</span>(<span class="st">&quot;table1&quot;</span>)</span>
<span id="cb44-38"><a href="shiny.html#cb44-38" aria-hidden="true" tabindex="-1"></a>             ))</span>
<span id="cb44-39"><a href="shiny.html#cb44-39" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb44-40"><a href="shiny.html#cb44-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-41"><a href="shiny.html#cb44-41" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="picker-input-and-more" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> Picker Input and more</h2>
<p>Yes, you can add the installation and library loading code for the shinyWidgets package in the global environment of your Shiny app.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="shiny.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;shinyWidgets&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;shinyWidgets&quot;</span>)</span>
<span id="cb45-2"><a href="shiny.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyWidgets)</span></code></pre></div>
<p>The pickerInput function creates a dropdown menu with checkboxes for selecting multiple continuous variables. The choices argument specifies the available options for selection, and selected specifies the default selections. The options argument specifies the options for the picker input widget. Here, we’ve used pickerOptions to enable an actions box that allows the user to select/deselect all options at once.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="shiny.html#cb46-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb46-2"><a href="shiny.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-3"><a href="shiny.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(</span>
<span id="cb46-4"><a href="shiny.html#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Summary Table&quot;</span>,</span>
<span id="cb46-5"><a href="shiny.html#cb46-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">sidebarLayout</span>(     </span>
<span id="cb46-6"><a href="shiny.html#cb46-6" aria-hidden="true" tabindex="-1"></a>               <span class="fu">sidebarPanel</span>(</span>
<span id="cb46-7"><a href="shiny.html#cb46-7" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb46-8"><a href="shiny.html#cb46-8" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create output</span></span>
<span id="cb46-9"><a href="shiny.html#cb46-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;smry&quot;</span>, <span class="st">&quot;Select variables of summary:&quot;</span>, <span class="at">choices =</span> gg, <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">&quot;sleepgp&quot;</span>))</span>
<span id="cb46-10"><a href="shiny.html#cb46-10" aria-hidden="true" tabindex="-1"></a>             ), </span>
<span id="cb46-11"><a href="shiny.html#cb46-11" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb46-12"><a href="shiny.html#cb46-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mainPanel</span>(</span>
<span id="cb46-13"><a href="shiny.html#cb46-13" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tableOutput</span>(<span class="st">&quot;tableoutput1&quot;</span>)</span>
<span id="cb46-14"><a href="shiny.html#cb46-14" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb46-15"><a href="shiny.html#cb46-15" aria-hidden="true" tabindex="-1"></a>    )), </span>
<span id="cb46-16"><a href="shiny.html#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Table 1&quot;</span>, </span>
<span id="cb46-17"><a href="shiny.html#cb46-17" aria-hidden="true" tabindex="-1"></a>             <span class="fu">sidebarLayout</span>(</span>
<span id="cb46-18"><a href="shiny.html#cb46-18" aria-hidden="true" tabindex="-1"></a>               <span class="fu">sidebarPanel</span>(</span>
<span id="cb46-19"><a href="shiny.html#cb46-19" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for strata variables</span></span>
<span id="cb46-20"><a href="shiny.html#cb46-20" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">pickerInput</span>(<span class="st">&quot;stratas&quot;</span>, <span class="st">&quot;Select strata variable(s):&quot;</span>, </span>
<span id="cb46-21"><a href="shiny.html#cb46-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="fu">names</span>(dat1)), </span>
<span id="cb46-22"><a href="shiny.html#cb46-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;sleepgp&quot;</span>, <span class="at">multiple =</span> <span class="cn">FALSE</span>, </span>
<span id="cb46-23"><a href="shiny.html#cb46-23" aria-hidden="true" tabindex="-1"></a>                         <span class="at">options =</span> myPickerOptions</span>
<span id="cb46-24"><a href="shiny.html#cb46-24" aria-hidden="true" tabindex="-1"></a>                         ),</span>
<span id="cb46-25"><a href="shiny.html#cb46-25" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb46-26"><a href="shiny.html#cb46-26" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for categorical variables</span></span>
<span id="cb46-27"><a href="shiny.html#cb46-27" aria-hidden="true" tabindex="-1"></a>             <span class="fu">pickerInput</span>(<span class="st">&quot;catVars&quot;</span>, <span class="st">&quot;Select categorical variable(s):&quot;</span>, </span>
<span id="cb46-28"><a href="shiny.html#cb46-28" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>), </span>
<span id="cb46-29"><a href="shiny.html#cb46-29" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;wwa1gp&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>, </span>
<span id="cb46-30"><a href="shiny.html#cb46-30" aria-hidden="true" tabindex="-1"></a>                         <span class="at">options =</span> myPickerOptions),</span>
<span id="cb46-31"><a href="shiny.html#cb46-31" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb46-32"><a href="shiny.html#cb46-32" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for continuous variables</span></span>
<span id="cb46-33"><a href="shiny.html#cb46-33" aria-hidden="true" tabindex="-1"></a>             <span class="fu">pickerInput</span>(<span class="st">&quot;conVars&quot;</span>, <span class="st">&quot;Select continuous variable(s):&quot;</span>, </span>
<span id="cb46-34"><a href="shiny.html#cb46-34" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="fu">names</span>(dat1)[<span class="fu">sapply</span>(dat1, is.numeric)]), </span>
<span id="cb46-35"><a href="shiny.html#cb46-35" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>, </span>
<span id="cb46-36"><a href="shiny.html#cb46-36" aria-hidden="true" tabindex="-1"></a>                         <span class="at">options =</span> myPickerOptions)</span>
<span id="cb46-37"><a href="shiny.html#cb46-37" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb46-38"><a href="shiny.html#cb46-38" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb46-39"><a href="shiny.html#cb46-39" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Output table for Table 1</span></span>
<span id="cb46-40"><a href="shiny.html#cb46-40" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mainPanel</span>(</span>
<span id="cb46-41"><a href="shiny.html#cb46-41" aria-hidden="true" tabindex="-1"></a>               <span class="fu">uiOutput</span>(<span class="st">&quot;table1&quot;</span>)</span>
<span id="cb46-42"><a href="shiny.html#cb46-42" aria-hidden="true" tabindex="-1"></a>             ))</span>
<span id="cb46-43"><a href="shiny.html#cb46-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb46-44"><a href="shiny.html#cb46-44" aria-hidden="true" tabindex="-1"></a>  ))</span></code></pre></div>
<p>The updatePickerInput function is used to dynamically update the dropdown menu options for categorical variables based on the selected strata variable.</p>
<p>The function takes several arguments:</p>
<p>session: the Shiny session object
inputId: the ID of the pickerInput widget to update
choices: a character vector of new choices for the pickerInput widget
selected: a character vector of selected choices for the pickerInput widget</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="shiny.html#cb47-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb47-2"><a href="shiny.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define reactive expression for output</span></span>
<span id="cb47-3"><a href="shiny.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-4"><a href="shiny.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  selected_smry <span class="ot">&lt;-</span> <span class="fu">reactive</span>({input<span class="sc">$</span>smry})</span>
<span id="cb47-5"><a href="shiny.html#cb47-5" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>tableoutput1 <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb47-6"><a href="shiny.html#cb47-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-7"><a href="shiny.html#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.numeric</span>(dat1 <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="fu">selected_smry</span>()))){</span>
<span id="cb47-8"><a href="shiny.html#cb47-8" aria-hidden="true" tabindex="-1"></a>      dat1 <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mean=</span><span class="fu">mean</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">selected_smry</span>())), </span>
<span id="cb47-9"><a href="shiny.html#cb47-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">sd=</span><span class="fu">sd</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">selected_smry</span>())))</span>
<span id="cb47-10"><a href="shiny.html#cb47-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb47-11"><a href="shiny.html#cb47-11" aria-hidden="true" tabindex="-1"></a>      dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(<span class="fu">selected_smry</span>())) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb47-12"><a href="shiny.html#cb47-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addmargins</span>() </span>
<span id="cb47-13"><a href="shiny.html#cb47-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb47-14"><a href="shiny.html#cb47-14" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb47-15"><a href="shiny.html#cb47-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-16"><a href="shiny.html#cb47-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-17"><a href="shiny.html#cb47-17" aria-hidden="true" tabindex="-1"></a>  catVars <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>catVars)</span>
<span id="cb47-18"><a href="shiny.html#cb47-18" aria-hidden="true" tabindex="-1"></a>  conVars <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>conVars)</span>
<span id="cb47-19"><a href="shiny.html#cb47-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-20"><a href="shiny.html#cb47-20" aria-hidden="true" tabindex="-1"></a>  selectedstrata <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>stratas)</span>
<span id="cb47-21"><a href="shiny.html#cb47-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb47-22"><a href="shiny.html#cb47-22" aria-hidden="true" tabindex="-1"></a>    char <span class="ot">=</span> <span class="fu">names</span>(dat1)[(<span class="fu">sapply</span>(dat1, is.character))]</span>
<span id="cb47-23"><a href="shiny.html#cb47-23" aria-hidden="true" tabindex="-1"></a>    choices <span class="ot">&lt;-</span> char[char<span class="sc">!=</span><span class="fu">selectedstrata</span>()]</span>
<span id="cb47-24"><a href="shiny.html#cb47-24" aria-hidden="true" tabindex="-1"></a>     <span class="fu">updatePickerInput</span>(session, <span class="st">&quot;catVars&quot;</span>, <span class="at">choices =</span> choices, <span class="at">selected =</span> <span class="st">&quot;None&quot;</span>)</span>
<span id="cb47-25"><a href="shiny.html#cb47-25" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb47-26"><a href="shiny.html#cb47-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-27"><a href="shiny.html#cb47-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-28"><a href="shiny.html#cb47-28" aria-hidden="true" tabindex="-1"></a>  tab1 <span class="ot">=</span> <span class="fu">reactive</span>(<span class="fu">tabf</span>(<span class="at">dat1=</span>dat1, <span class="at">stratas =</span> <span class="fu">selectedstrata</span>(), <span class="at">catVars =</span> <span class="fu">catVars</span>(), <span class="at">conVars =</span> <span class="fu">conVars</span>()))</span>
<span id="cb47-29"><a href="shiny.html#cb47-29" aria-hidden="true" tabindex="-1"></a>   output<span class="sc">$</span>table1 <span class="ot">=</span> <span class="fu">renderUI</span>(<span class="fu">tab1</span>() <span class="sc">%&gt;%</span> <span class="fu">htmlTable</span>(<span class="at">align =</span><span class="st">&quot;l&quot;</span>))</span>
<span id="cb47-30"><a href="shiny.html#cb47-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-31"><a href="shiny.html#cb47-31" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>In global, We have also defined the myPickerOptions list, which is used to customize the options for the pickerInput widget.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="shiny.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb48-2"><a href="shiny.html#cb48-2" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/kwcs6th.rds&quot;</span>)</span>
<span id="cb48-3"><a href="shiny.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="shiny.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb48-5"><a href="shiny.html#cb48-5" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> dat1 <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="shiny.html#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;sleepgp&quot;</span>, <span class="st">&quot;wwa1gp&quot;</span>, <span class="st">&quot;shortReturn&quot;</span>,<span class="st">&quot;shiftWork&quot;</span> , <span class="st">&quot;njob&quot;</span>, <span class="st">&quot;sexgp&quot;</span>,  <span class="st">&quot;edugp&quot;</span>, <span class="st">&quot;empgp&quot;</span>, <span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;satisfaction&quot;</span>)</span>
<span id="cb48-7"><a href="shiny.html#cb48-7" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">remove_labels</span>(dat1) </span>
<span id="cb48-8"><a href="shiny.html#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="shiny.html#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="shiny.html#cb48-10" aria-hidden="true" tabindex="-1"></a>gg <span class="ot">=</span> <span class="fu">names</span>(dat1) <span class="sc">%&gt;%</span> <span class="fu">as.list</span>()</span>
<span id="cb48-11"><a href="shiny.html#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="shiny.html#cb48-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-13"><a href="shiny.html#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;devtools&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb48-14"><a href="shiny.html#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb48-15"><a href="shiny.html#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;tabf&quot;</span>)) <span class="fu">install_github</span>(<span class="st">&quot;jinhaslab/tabf&quot;</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-16"><a href="shiny.html#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tabf)</span>
<span id="cb48-17"><a href="shiny.html#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;tidyverse&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb48-18"><a href="shiny.html#cb48-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;htmlTable&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;htmlTable&quot;</span>)</span>
<span id="cb48-19"><a href="shiny.html#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;broom&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;broom&quot;</span>)</span>
<span id="cb48-20"><a href="shiny.html#cb48-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-21"><a href="shiny.html#cb48-21" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;shinyWidgets&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;shinyWidgets&quot;</span>)</span>
<span id="cb48-22"><a href="shiny.html#cb48-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyWidgets)</span>
<span id="cb48-23"><a href="shiny.html#cb48-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-24"><a href="shiny.html#cb48-24" aria-hidden="true" tabindex="-1"></a>myPickerOptions <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb48-25"><a href="shiny.html#cb48-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">actions-box</span><span class="st">`</span> <span class="ot">=</span> <span class="cn">TRUE</span>,</span>
<span id="cb48-26"><a href="shiny.html#cb48-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">live-search</span><span class="st">`</span> <span class="ot">=</span> <span class="cn">TRUE</span>,</span>
<span id="cb48-27"><a href="shiny.html#cb48-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">selected-text-format</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;count &gt; 2&quot;</span>,</span>
<span id="cb48-28"><a href="shiny.html#cb48-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">search =</span> <span class="cn">TRUE</span></span>
<span id="cb48-29"><a href="shiny.html#cb48-29" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="logistic-regression-model" class="section level2" number="6.8">
<h2><span class="header-section-number">6.8</span> Logistic Regression model</h2>
<p>We have created three pickerInput widgets to select the dependent variable, independent variable(s), and reference categories for categorical variables. The options argument for the pickerInput widgets is set to myPickerOptions, which customizes the appearance of the dropdown menus.
We have also created an action button with label “Analysis Start” that the user can click to run the logistic regression model.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="shiny.html#cb49-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb49-2"><a href="shiny.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-3"><a href="shiny.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(</span>
<span id="cb49-4"><a href="shiny.html#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Summary Table&quot;</span>,</span>
<span id="cb49-5"><a href="shiny.html#cb49-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">sidebarLayout</span>(     </span>
<span id="cb49-6"><a href="shiny.html#cb49-6" aria-hidden="true" tabindex="-1"></a>               <span class="fu">sidebarPanel</span>(</span>
<span id="cb49-7"><a href="shiny.html#cb49-7" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb49-8"><a href="shiny.html#cb49-8" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create output ----------------</span></span>
<span id="cb49-9"><a href="shiny.html#cb49-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">selectInput</span>(<span class="st">&quot;smry&quot;</span>, <span class="st">&quot;Select variables of summary:&quot;</span>, <span class="at">choices =</span> gg, <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">&quot;sleepgp&quot;</span>))</span>
<span id="cb49-10"><a href="shiny.html#cb49-10" aria-hidden="true" tabindex="-1"></a>             ), </span>
<span id="cb49-11"><a href="shiny.html#cb49-11" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb49-12"><a href="shiny.html#cb49-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mainPanel</span>(</span>
<span id="cb49-13"><a href="shiny.html#cb49-13" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tableOutput</span>(<span class="st">&quot;tableoutput1&quot;</span>)</span>
<span id="cb49-14"><a href="shiny.html#cb49-14" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb49-15"><a href="shiny.html#cb49-15" aria-hidden="true" tabindex="-1"></a>    )), </span>
<span id="cb49-16"><a href="shiny.html#cb49-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Table 1&quot;</span>, </span>
<span id="cb49-17"><a href="shiny.html#cb49-17" aria-hidden="true" tabindex="-1"></a>             <span class="fu">sidebarLayout</span>(</span>
<span id="cb49-18"><a href="shiny.html#cb49-18" aria-hidden="true" tabindex="-1"></a>               <span class="fu">sidebarPanel</span>(</span>
<span id="cb49-19"><a href="shiny.html#cb49-19" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for strata variables</span></span>
<span id="cb49-20"><a href="shiny.html#cb49-20" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">pickerInput</span>(<span class="st">&quot;stratas&quot;</span>, <span class="st">&quot;Select strata variable(s):&quot;</span>, </span>
<span id="cb49-21"><a href="shiny.html#cb49-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="fu">names</span>(dat1)), </span>
<span id="cb49-22"><a href="shiny.html#cb49-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;sleepgp&quot;</span>, <span class="at">multiple =</span> <span class="cn">FALSE</span>, </span>
<span id="cb49-23"><a href="shiny.html#cb49-23" aria-hidden="true" tabindex="-1"></a>                         <span class="at">options =</span> myPickerOptions</span>
<span id="cb49-24"><a href="shiny.html#cb49-24" aria-hidden="true" tabindex="-1"></a>                         ),</span>
<span id="cb49-25"><a href="shiny.html#cb49-25" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb49-26"><a href="shiny.html#cb49-26" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for categorical variables</span></span>
<span id="cb49-27"><a href="shiny.html#cb49-27" aria-hidden="true" tabindex="-1"></a>             <span class="fu">pickerInput</span>(<span class="st">&quot;catVars&quot;</span>, <span class="st">&quot;Select categorical variable(s):&quot;</span>, </span>
<span id="cb49-28"><a href="shiny.html#cb49-28" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>), </span>
<span id="cb49-29"><a href="shiny.html#cb49-29" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;None&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>, </span>
<span id="cb49-30"><a href="shiny.html#cb49-30" aria-hidden="true" tabindex="-1"></a>                         <span class="at">options =</span> myPickerOptions),</span>
<span id="cb49-31"><a href="shiny.html#cb49-31" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb49-32"><a href="shiny.html#cb49-32" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Create dropdown for continuous variables</span></span>
<span id="cb49-33"><a href="shiny.html#cb49-33" aria-hidden="true" tabindex="-1"></a>             <span class="fu">pickerInput</span>(<span class="st">&quot;conVars&quot;</span>, <span class="st">&quot;Select continuous variable(s):&quot;</span>, </span>
<span id="cb49-34"><a href="shiny.html#cb49-34" aria-hidden="true" tabindex="-1"></a>                         <span class="at">choices =</span> <span class="fu">c</span>(<span class="fu">names</span>(dat1)[<span class="fu">sapply</span>(dat1, is.numeric)]), </span>
<span id="cb49-35"><a href="shiny.html#cb49-35" aria-hidden="true" tabindex="-1"></a>                         <span class="at">selected =</span> <span class="st">&quot;None&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>, </span>
<span id="cb49-36"><a href="shiny.html#cb49-36" aria-hidden="true" tabindex="-1"></a>                         <span class="at">options =</span> myPickerOptions)</span>
<span id="cb49-37"><a href="shiny.html#cb49-37" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb49-38"><a href="shiny.html#cb49-38" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb49-39"><a href="shiny.html#cb49-39" aria-hidden="true" tabindex="-1"></a>             <span class="co"># Output table for Table 1</span></span>
<span id="cb49-40"><a href="shiny.html#cb49-40" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mainPanel</span>(</span>
<span id="cb49-41"><a href="shiny.html#cb49-41" aria-hidden="true" tabindex="-1"></a>               <span class="fu">uiOutput</span>(<span class="st">&quot;table1&quot;</span>)</span>
<span id="cb49-42"><a href="shiny.html#cb49-42" aria-hidden="true" tabindex="-1"></a>             ))</span>
<span id="cb49-43"><a href="shiny.html#cb49-43" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb49-44"><a href="shiny.html#cb49-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(<span class="st">&quot;Logistic Model&quot;</span>,</span>
<span id="cb49-45"><a href="shiny.html#cb49-45" aria-hidden="true" tabindex="-1"></a>             <span class="fu">sidebarLayout</span>(</span>
<span id="cb49-46"><a href="shiny.html#cb49-46" aria-hidden="true" tabindex="-1"></a>               <span class="fu">sidebarPanel</span>(  </span>
<span id="cb49-47"><a href="shiny.html#cb49-47" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">pickerInput</span>(<span class="st">&quot;Dependent&quot;</span>, <span class="st">&quot;Dependent Variable: &quot;</span>, </span>
<span id="cb49-48"><a href="shiny.html#cb49-48" aria-hidden="true" tabindex="-1"></a>                             <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="fu">names</span>(dat1)), </span>
<span id="cb49-49"><a href="shiny.html#cb49-49" aria-hidden="true" tabindex="-1"></a>                             <span class="at">selected =</span> <span class="st">&quot;sleepgp&quot;</span>, <span class="at">multiple =</span> <span class="cn">FALSE</span>)</span>
<span id="cb49-50"><a href="shiny.html#cb49-50" aria-hidden="true" tabindex="-1"></a>                 ,</span>
<span id="cb49-51"><a href="shiny.html#cb49-51" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">uiOutput</span>(<span class="st">&quot;RefsChoice&quot;</span>),</span>
<span id="cb49-52"><a href="shiny.html#cb49-52" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">pickerInput</span>(<span class="st">&quot;Independent&quot;</span>, <span class="st">&quot;Independent Variable: &quot;</span>, </span>
<span id="cb49-53"><a href="shiny.html#cb49-53" aria-hidden="true" tabindex="-1"></a>                             <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>), </span>
<span id="cb49-54"><a href="shiny.html#cb49-54" aria-hidden="true" tabindex="-1"></a>                             <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">&quot;wwa1gp&quot;</span>), <span class="at">multiple =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-55"><a href="shiny.html#cb49-55" aria-hidden="true" tabindex="-1"></a>                             <span class="at">options =</span> myPickerOptions)</span>
<span id="cb49-56"><a href="shiny.html#cb49-56" aria-hidden="true" tabindex="-1"></a>                 ,</span>
<span id="cb49-57"><a href="shiny.html#cb49-57" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">actionButton</span>(<span class="at">inputId =</span> <span class="st">&quot;submit&quot;</span>, <span class="at">label =</span><span class="st">&quot;Analysis Start&quot;</span>),</span>
<span id="cb49-58"><a href="shiny.html#cb49-58" aria-hidden="true" tabindex="-1"></a>                 </span>
<span id="cb49-59"><a href="shiny.html#cb49-59" aria-hidden="true" tabindex="-1"></a>               ),</span>
<span id="cb49-60"><a href="shiny.html#cb49-60" aria-hidden="true" tabindex="-1"></a>               <span class="fu">mainPanel</span>(tags<span class="sc">$</span><span class="fu">h3</span>(<span class="st">&quot;model formular&quot;</span>),</span>
<span id="cb49-61"><a href="shiny.html#cb49-61" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">htmlOutput</span>(<span class="st">&quot;formular&quot;</span>), </span>
<span id="cb49-62"><a href="shiny.html#cb49-62" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">htmlOutput</span>(<span class="st">&quot;mod1&quot;</span>))</span>
<span id="cb49-63"><a href="shiny.html#cb49-63" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb49-64"><a href="shiny.html#cb49-64" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-65"><a href="shiny.html#cb49-65" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-66"><a href="shiny.html#cb49-66" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>In server setting,
First, We define the reactive expression RC, which gets the unique values of the dependent variable to use as the reference value for the logistic regression model. We then create an output called RefsChoice that uses a pickerInput widget to allow the user to select the reference category for categorical variables.</p>
<p>Next, We define the reactive expression SelectedDependent which retrieves the value of the dependent variable selected by the user. We then create an observer that updates the choices available for the independent variable dropdown based on the selected dependent variable.</p>
<p>We create two output elements: formular and mod1. The formular output generates a string that displays the logistic regression model formula based on the user’s input. The mod1 output uses the glm function to fit a logistic regression model and generate the summary output using oddsTabf.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="shiny.html#cb50-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb50-2"><a href="shiny.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define reactive expression for output</span></span>
<span id="cb50-3"><a href="shiny.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-4"><a href="shiny.html#cb50-4" aria-hidden="true" tabindex="-1"></a>  selected_smry <span class="ot">&lt;-</span> <span class="fu">reactive</span>({input<span class="sc">$</span>smry})</span>
<span id="cb50-5"><a href="shiny.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>tableoutput1 <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb50-6"><a href="shiny.html#cb50-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-7"><a href="shiny.html#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.numeric</span>(dat1 <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="fu">selected_smry</span>()))){</span>
<span id="cb50-8"><a href="shiny.html#cb50-8" aria-hidden="true" tabindex="-1"></a>      dat1 <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mean=</span><span class="fu">mean</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">selected_smry</span>())), </span>
<span id="cb50-9"><a href="shiny.html#cb50-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">sd=</span><span class="fu">sd</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">selected_smry</span>())))</span>
<span id="cb50-10"><a href="shiny.html#cb50-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb50-11"><a href="shiny.html#cb50-11" aria-hidden="true" tabindex="-1"></a>      dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(<span class="fu">selected_smry</span>())) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-12"><a href="shiny.html#cb50-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addmargins</span>() </span>
<span id="cb50-13"><a href="shiny.html#cb50-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb50-14"><a href="shiny.html#cb50-14" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb50-15"><a href="shiny.html#cb50-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-16"><a href="shiny.html#cb50-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-17"><a href="shiny.html#cb50-17" aria-hidden="true" tabindex="-1"></a>  catVars <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>catVars)</span>
<span id="cb50-18"><a href="shiny.html#cb50-18" aria-hidden="true" tabindex="-1"></a>  conVars <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>conVars)</span>
<span id="cb50-19"><a href="shiny.html#cb50-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-20"><a href="shiny.html#cb50-20" aria-hidden="true" tabindex="-1"></a>  selectedstrata <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>stratas)</span>
<span id="cb50-21"><a href="shiny.html#cb50-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb50-22"><a href="shiny.html#cb50-22" aria-hidden="true" tabindex="-1"></a>    char <span class="ot">=</span> <span class="fu">names</span>(dat1)[(<span class="fu">sapply</span>(dat1, is.character))]</span>
<span id="cb50-23"><a href="shiny.html#cb50-23" aria-hidden="true" tabindex="-1"></a>    choices <span class="ot">&lt;-</span> char[char<span class="sc">!=</span><span class="fu">selectedstrata</span>()]</span>
<span id="cb50-24"><a href="shiny.html#cb50-24" aria-hidden="true" tabindex="-1"></a>     <span class="fu">updatePickerInput</span>(session, <span class="st">&quot;catVars&quot;</span>, <span class="at">choices =</span> choices, <span class="at">selected =</span> <span class="st">&quot;None&quot;</span>)</span>
<span id="cb50-25"><a href="shiny.html#cb50-25" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb50-26"><a href="shiny.html#cb50-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-27"><a href="shiny.html#cb50-27" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb50-28"><a href="shiny.html#cb50-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(<span class="fu">catVars</span>())) {</span>
<span id="cb50-29"><a href="shiny.html#cb50-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabf</span>(<span class="at">dat1=</span>dat1, <span class="at">stratas =</span> <span class="fu">selectedstrata</span>(), <span class="at">conVars =</span> <span class="fu">conVars</span>())</span>
<span id="cb50-30"><a href="shiny.html#cb50-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.null</span>(<span class="fu">conVars</span>())) {</span>
<span id="cb50-31"><a href="shiny.html#cb50-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabf</span>(<span class="at">dat1=</span>dat1, <span class="at">stratas =</span> <span class="fu">selectedstrata</span>(), <span class="at">catVars =</span> <span class="fu">catVars</span>())</span>
<span id="cb50-32"><a href="shiny.html#cb50-32" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb50-33"><a href="shiny.html#cb50-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabf</span>(<span class="at">dat1=</span>dat1, <span class="at">stratas =</span> <span class="fu">selectedstrata</span>(), <span class="at">catVars =</span> <span class="fu">catVars</span>(), <span class="at">conVars =</span> <span class="fu">conVars</span>())</span>
<span id="cb50-34"><a href="shiny.html#cb50-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb50-35"><a href="shiny.html#cb50-35" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb50-36"><a href="shiny.html#cb50-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-37"><a href="shiny.html#cb50-37" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>table1 <span class="ot">=</span> <span class="fu">renderUI</span>({</span>
<span id="cb50-38"><a href="shiny.html#cb50-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">validate</span>(<span class="fu">need</span>(<span class="fu">catVars</span>(), <span class="st">&quot;Select variables&quot;</span>))</span>
<span id="cb50-39"><a href="shiny.html#cb50-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab1</span>() <span class="sc">%&gt;%</span> <span class="fu">htmlTable</span>(<span class="at">align =</span><span class="st">&quot;l&quot;</span>)</span>
<span id="cb50-40"><a href="shiny.html#cb50-40" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb50-41"><a href="shiny.html#cb50-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-42"><a href="shiny.html#cb50-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-43"><a href="shiny.html#cb50-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-44"><a href="shiny.html#cb50-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-45"><a href="shiny.html#cb50-45" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb50-46"><a href="shiny.html#cb50-46" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb50-47"><a href="shiny.html#cb50-47" aria-hidden="true" tabindex="-1"></a>   <span class="co"># logistic regression</span></span>
<span id="cb50-48"><a href="shiny.html#cb50-48" aria-hidden="true" tabindex="-1"></a>   <span class="do">## reference value</span></span>
<span id="cb50-49"><a href="shiny.html#cb50-49" aria-hidden="true" tabindex="-1"></a>   RC <span class="ot">&lt;-</span>  <span class="fu">reactive</span>({ <span class="fu">validate</span>(</span>
<span id="cb50-50"><a href="shiny.html#cb50-50" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">need</span>(input<span class="sc">$</span>Dependent, <span class="st">&quot;Dependent variable&quot;</span>) )</span>
<span id="cb50-51"><a href="shiny.html#cb50-51" aria-hidden="true" tabindex="-1"></a>                     dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(input<span class="sc">$</span>Dependent) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">pull</span>(.)</span>
<span id="cb50-52"><a href="shiny.html#cb50-52" aria-hidden="true" tabindex="-1"></a>                     })</span>
<span id="cb50-53"><a href="shiny.html#cb50-53" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb50-54"><a href="shiny.html#cb50-54" aria-hidden="true" tabindex="-1"></a>   output<span class="sc">$</span>RefsChoice <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb50-55"><a href="shiny.html#cb50-55" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">pickerInput</span>(<span class="st">&quot;Refs&quot;</span>, <span class="st">&quot;Odds for:&quot;</span>,</span>
<span id="cb50-56"><a href="shiny.html#cb50-56" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">list</span>(<span class="st">`</span><span class="at">odds for</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">RC</span>()))</span>
<span id="cb50-57"><a href="shiny.html#cb50-57" aria-hidden="true" tabindex="-1"></a>                      })</span>
<span id="cb50-58"><a href="shiny.html#cb50-58" aria-hidden="true" tabindex="-1"></a>   <span class="do">## independent variable</span></span>
<span id="cb50-59"><a href="shiny.html#cb50-59" aria-hidden="true" tabindex="-1"></a>   SelectedDependent <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>Dependent)</span>
<span id="cb50-60"><a href="shiny.html#cb50-60" aria-hidden="true" tabindex="-1"></a>   <span class="fu">observe</span>({</span>
<span id="cb50-61"><a href="shiny.html#cb50-61" aria-hidden="true" tabindex="-1"></a>     char2 <span class="ot">=</span> <span class="fu">names</span>(dat1)</span>
<span id="cb50-62"><a href="shiny.html#cb50-62" aria-hidden="true" tabindex="-1"></a>     choices2 <span class="ot">&lt;-</span> char2[char2<span class="sc">!=</span><span class="fu">SelectedDependent</span>()]</span>
<span id="cb50-63"><a href="shiny.html#cb50-63" aria-hidden="true" tabindex="-1"></a>     <span class="fu">updatePickerInput</span>(session, <span class="st">&quot;Independent&quot;</span>, <span class="at">choices =</span> choices2, <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>), </span>
<span id="cb50-64"><a href="shiny.html#cb50-64" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">options =</span> myPickerOptions)</span>
<span id="cb50-65"><a href="shiny.html#cb50-65" aria-hidden="true" tabindex="-1"></a>   })</span>
<span id="cb50-66"><a href="shiny.html#cb50-66" aria-hidden="true" tabindex="-1"></a>   output<span class="sc">$</span>formular <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb50-67"><a href="shiny.html#cb50-67" aria-hidden="true" tabindex="-1"></a>     form <span class="ot">&lt;-</span> <span class="fu">HTML</span>(<span class="fu">sprintf</span>(<span class="st">&quot;&lt;h3&gt; %s == &#39;%s&#39; &lt;br/&gt; ~ %s &lt;/h3&gt;&quot;</span>,input<span class="sc">$</span>Dependent, input<span class="sc">$</span>Refs  ,<span class="fu">paste0</span>(input<span class="sc">$</span>Independent, <span class="at">collapse=</span><span class="st">&quot; + &quot;</span>)))</span>
<span id="cb50-68"><a href="shiny.html#cb50-68" aria-hidden="true" tabindex="-1"></a>   })</span>
<span id="cb50-69"><a href="shiny.html#cb50-69" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb50-70"><a href="shiny.html#cb50-70" aria-hidden="true" tabindex="-1"></a>   output<span class="sc">$</span>mod1  <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb50-71"><a href="shiny.html#cb50-71" aria-hidden="true" tabindex="-1"></a>     <span class="fu">validate</span>( <span class="fu">need</span>(input<span class="sc">$</span>Independent, <span class="st">&quot;Select independent variable&quot;</span>) )</span>
<span id="cb50-72"><a href="shiny.html#cb50-72" aria-hidden="true" tabindex="-1"></a>     f1 <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s == &#39;%s&#39; ~ %s &quot;</span>,</span>
<span id="cb50-73"><a href="shiny.html#cb50-73" aria-hidden="true" tabindex="-1"></a>                   input<span class="sc">$</span>Dependent, input<span class="sc">$</span>Refs  ,</span>
<span id="cb50-74"><a href="shiny.html#cb50-74" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">paste0</span>(input<span class="sc">$</span>Independent, <span class="at">collapse=</span><span class="st">&quot; + &quot;</span>))</span>
<span id="cb50-75"><a href="shiny.html#cb50-75" aria-hidden="true" tabindex="-1"></a>     mod1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="at">data=</span>dat1,<span class="at">family=</span><span class="fu">binomial</span>(), <span class="fu">as.formula</span>(f1))</span>
<span id="cb50-76"><a href="shiny.html#cb50-76" aria-hidden="true" tabindex="-1"></a>      <span class="fu">oddsTabf</span>(mod1)</span>
<span id="cb50-77"><a href="shiny.html#cb50-77" aria-hidden="true" tabindex="-1"></a>   })</span>
<span id="cb50-78"><a href="shiny.html#cb50-78" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb50-79"><a href="shiny.html#cb50-79" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-80"><a href="shiny.html#cb50-80" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The global is same as we made.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="shiny.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb51-2"><a href="shiny.html#cb51-2" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/kwcs6th.rds&quot;</span>)</span>
<span id="cb51-3"><a href="shiny.html#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="shiny.html#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb51-5"><a href="shiny.html#cb51-5" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> dat1 <span class="sc">%&gt;%</span></span>
<span id="cb51-6"><a href="shiny.html#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;sleepgp&quot;</span>, <span class="st">&quot;wwa1gp&quot;</span>, <span class="st">&quot;shortReturn&quot;</span>,<span class="st">&quot;shiftWork&quot;</span> , <span class="st">&quot;njob&quot;</span>, <span class="st">&quot;sexgp&quot;</span>,  <span class="st">&quot;edugp&quot;</span>, <span class="st">&quot;empgp&quot;</span>, <span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;satisfaction&quot;</span>)</span>
<span id="cb51-7"><a href="shiny.html#cb51-7" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">remove_labels</span>(dat1) </span>
<span id="cb51-8"><a href="shiny.html#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="shiny.html#cb51-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-10"><a href="shiny.html#cb51-10" aria-hidden="true" tabindex="-1"></a>gg <span class="ot">=</span> <span class="fu">names</span>(dat1) <span class="sc">%&gt;%</span> <span class="fu">as.list</span>()</span>
<span id="cb51-11"><a href="shiny.html#cb51-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-12"><a href="shiny.html#cb51-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-13"><a href="shiny.html#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;devtools&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb51-14"><a href="shiny.html#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb51-15"><a href="shiny.html#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;tabf&quot;</span>)) <span class="fu">install_github</span>(<span class="st">&quot;jinhaslab/tabf&quot;</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-16"><a href="shiny.html#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tabf)</span>
<span id="cb51-17"><a href="shiny.html#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;tidyverse&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb51-18"><a href="shiny.html#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;htmlTable&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;htmlTable&quot;</span>)</span>
<span id="cb51-19"><a href="shiny.html#cb51-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;broom&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;broom&quot;</span>)</span>
<span id="cb51-20"><a href="shiny.html#cb51-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-21"><a href="shiny.html#cb51-21" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;shinyWidgets&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;shinyWidgets&quot;</span>)</span>
<span id="cb51-22"><a href="shiny.html#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyWidgets)</span>
<span id="cb51-23"><a href="shiny.html#cb51-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-24"><a href="shiny.html#cb51-24" aria-hidden="true" tabindex="-1"></a>myPickerOptions <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb51-25"><a href="shiny.html#cb51-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">actions-box</span><span class="st">`</span> <span class="ot">=</span> <span class="cn">TRUE</span>,</span>
<span id="cb51-26"><a href="shiny.html#cb51-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">live-search</span><span class="st">`</span> <span class="ot">=</span> <span class="cn">TRUE</span>,</span>
<span id="cb51-27"><a href="shiny.html#cb51-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">selected-text-format</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;count &gt; 2&quot;</span>,</span>
<span id="cb51-28"><a href="shiny.html#cb51-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">search =</span> <span class="cn">TRUE</span></span>
<span id="cb51-29"><a href="shiny.html#cb51-29" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Dashbord for Public Health with R</strong>" was written by jinha yoon. It was last built on 2023-03-31.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
